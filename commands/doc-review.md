# 文档治理命令

> 全面审计项目文档质量，确保文档规范、准确、可维护

## 使用方式

在 Claude Code 中通过斜杠命令调用：

```bash
/doc-review                    # 审计所有文档
/doc-review --file README.md   # 审计指定文档
/doc-review --type command     # 审计指定类型
/doc-review --outdated         # 仅审计过时文档
```

---

## 任务

AI 将帮助你：

1. **全面扫描**: 扫描项目中的所有 Markdown 文档
2. **质量评估**: 从多个维度评估文档质量
3. **问题识别**: 识别文档中的问题和不规范之处
4. **改进建议**: 提供具体的改进建议
5. **生成报告**: 生成详细的审计报告和优先级清单

## 执行步骤

### 1. 扫描文档文件

```bash
find . -name "*.md" -type f \
  -not -path "*/node_modules/*" \
  -not -path "*/.git/*" \
  -not -path "*/dist/*" \
  -not -path "*/build/*" | sort
```

### 2. 分类文档

根据路径和内容分类：
- **README**: 项目主文档
- **API**: API 接口文档
- **开发文档**: 开发指南、架构文档、设计文档
- **命令文档**: `.claude/commands/*.md`
- **配置文档**: 配置文件说明、环境变量文档
- **其他**: 变更日志、贡献指南等

### 3. 分析每个文档

对每个文档执行以下检查：

#### 结构完整性（30分）
- 标题、描述、必要章节
- 根据文档类型检查特定结构

#### 内容质量（30分）
- **清晰度**: 描述是否清晰易懂
- **完整性**: 是否覆盖所有必要信息
- **准确性**: 信息是否准确，无过时内容
- **可执行性**: 步骤是否可执行，命令是否有效

#### 格式规范（20分）
- 标题层级合理（不超过 4 级）
- 代码块有语言标识
- 表格格式正确
- 链接格式正确

#### 一致性（10分）
- 风格一致、术语一致、结构一致

#### 可维护性（5分）
- 最后更新时间、版本号、维护者信息

#### 准确性（5分）
- 代码引用准确、链接有效

### 4. 生成审计报告

报告包含：

```markdown
# 文档治理审计报告

## 总体评分
| 文档 | 类型 | 总分 | 等级 |
|------|------|------|------|

## 详细问题清单
### 文档名
#### 🔴 严重问题（必须修复）
#### 🟡 改进建议（建议修复）
#### 🟢 轻微问题（可选修复）

## 改进优先级建议
### 高优先级
### 中优先级
### 低优先级

## 最佳实践建议
```

报告输出路径：`docs/audit/doc-review-{YYYYMMDD-HHMMSS}.md`

## 评分标准

### 等级划分
- **优秀** (90-100分): 文档质量优秀，无需改进
- **良好** (80-89分): 文档质量良好，有少量改进空间
- **合格** (70-79分): 文档质量合格，建议改进
- **需改进** (60-69分): 文档质量需要改进
- **不合格** (<60分): 文档质量不合格，需要重大改进

### 总分计算
```
总分 = 结构完整性 × 0.3 + 内容质量 × 0.3 + 格式规范 × 0.2
     + 一致性 × 0.1 + 可维护性 × 0.05 + 准确性 × 0.05
```

## 常用参数

### 基本参数
- `--file <path>`: 仅审计指定的文档
- `--type <type>`: 仅审计指定类型（readme/api/dev/command/config/other）
- `--dir <path>`: 仅审计指定目录下的文档

### 过滤参数
- `--min-score <score>`: 仅显示评分低于指定分数的文档
- `--severity <level>`: 仅显示指定严重程度的问题（critical/warning/info）
- `--outdated`: 仅审计过时的文档（超过 90 天未更新）
- `--broken-links`: 仅审计包含无效链接的文档

### 操作参数
- `--fix`: 自动修复可修复的问题（如格式问题）
- `--dry-run`: 仅预览，不生成报告
- `--verbose`: 显示详细输出

### 输出参数
- `--output <path>`: 指定审计报告输出路径
- `--format <format>`: 指定报告格式（markdown/json，默认 markdown）

## 注意事项

1. **性能考虑**: 大型项目审计可能需要较长时间
2. **链接验证**: 外部链接验证需要网络连接
3. **代码引用验证**: 需要确保项目代码已正确加载
4. **格式修复**: 使用 `--fix` 前建议先备份

---

**最后更新**: 2025-12-12
**版本**: 2.0.0
